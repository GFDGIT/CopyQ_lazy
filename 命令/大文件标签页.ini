[Command]
Name=大文件标签页
Command="
    copyq:
    const tabName = '大文件'
    // 文件大小，默认值1000kb
    const minBytes = 1000 * 1000
    // 是否识别复制的本地文件大小
    // 主要用于避免视频等大文件同步
    const readFileSize = true

    function hasBigData() {
        let itemSize = 0
        let formats = dataFormats()
        for (let i in formats) {
            if (readFileSize && formats[i] == 'text/uri-list') {
                let fpath = str(data(formats[i])).split('///')[1]
                let f = new File(fpath)
                itemSize += f.size()
            } else
                itemSize += data(formats[i]).size()
            }
            
            if (itemSize >= minBytes) {
                return true
        }
        return false
    }

    if (hasBigData()) {
        setData(mimeOutputTab, tabName)
    }"
Automatic=true
Icon=